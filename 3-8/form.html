<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Form</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
</head>
<body onload="captcha()">
    <h1 id="date"></h1>
    <form>
        <label>Username</label><input type="text" id="uname">
        <span id="msg"></span>
        <br>
        <label>Email</label><input type="text" id="email">
        <span id="msg1"></span>
        <br>
        <label>Date</label><input type="date" id="date1">
        <span id="msg5"></span>
        <br>
        <label>Gender</label><input type="radio" id="male" value="male" name="gen">Male
        <input type="radio" id="female" value="female"  name="gen">Female
        <span id="msg2"></span>
        <br>
        <label>Hobbies</label><input type="checkbox" name="hobby" value="Travelling">Travelling
        <input type="checkbox" name="hobby" value="badminton">badminton
        <input type="checkbox" name="hobby" value="cricket">cricket
        <input type="checkbox" name="hobby" value="baking">baking
        <span id="msg3"></span>
        <br>
        <label>Select City</label>
        <select style="margin-bottom: 5px;width:170px" id="city">
            <option selected disabled value="select">select city</option>
            <optgroup label="Maharashtra">
                <option>Pune</option>
                <option>Mumbai</option>
            </optgroup>
            <optgroup label="Rajasthan">
                <option>Jaipur</option>
                <option>Udaipur</option>
            </optgroup>
            <optgroup label="UP">
                <option>Agra</option>
            </optgroup>
            <option value="other">other</option>
        </select>
        <span id="c"></span>
        <span id="msg6"></span>
        <br>
        <input type="button" id="cap" style="background-color: red;color:white;margin-right: 10px;">
        <input type="text" id="checkcap"><span id="msg4"></span>
        <br>
        <input type="button" id="submit" value="Login">
        <ul id="additem"></ul>
     </form>
    <script>
        document.getElementById("submit").onclick=function(){
                var exp =/^([a-zA-Z]+)\s([a-zA-Z]+)$/
            var username=document.getElementById("uname").value;
            if(username.length==0){
                document.getElementById("msg").innerHTML="Username is required"
                document.getElementById("msg").style.color="red"
            }
            else if(!username.match(exp)){
                document.getElementById("msg").innerHTML="Username can contain alphabets only"
                document.getElementById("msg").style.color="red"
            }
            else{
                document.getElementById("msg").innerHTML=" "
          }
          var gen='';
          var gender=document.getElementsByName("gen"); //we get array of the elements who have this name
          if(!gender[0].checked && !gender[1].checked){
            document.getElementById("msg2").innerHTML="Please select gender"
                document.getElementById("msg2").style.color="red"
          }
          else if ( gender[0].checked){
            gen=gender[0].value;
            document.getElementById("msg2").innerHTML=' '
          
          }
          else if( gender[1].checked){
            gen=gender[1].value;
            document.getElementById("msg2").innerHTML=''
          }
          var hobbies= document.getElementsByName("hobby")
          var chval=''
          hasch=false
          for(var i=0;i<hobbies.length;i++){
              if(hobbies[i].checked==true) {
                chval = chval + hobbies[i].value+',';
                hasch=true    
              }
          }
          if(hasch==false){
            document.getElementById("msg3").innerHTML="Please select hobby"
                document.getElementById("msg3").style.color="red"
          }
          else{
            document.getElementById("msg3").innerHTML=''
          }

          var dob=new Date(document.getElementById("date1").value).getFullYear()
          var today=new Date().getFullYear();
          var current=today-dob;
      
          if(!(current>18))
          {
            document.getElementById("msg5").innerHTML="Age should be > 18"
                document.getElementById("msg5").style.color="red"
          }
          else
          document.getElementById("msg5").innerHTML=''

          var city=document.getElementById("city").value;
           if(city=="select"){
            document.getElementById("msg6").innerHTML="Please select city"
                document.getElementById("msg6").style.color="red"
           }
           else if(city=="other"){
               var v=document.getElementById('txt').value
               if(v.length==0){
                document.getElementById("msg6").innerHTML="Please select city"
                document.getElementById("msg6").style.color="red"
               }
               else
               document.getElementById("msg6").innerHTML=v
           
            }
           else
           document.getElementById("msg6").innerHTML=''

           
        }

        document.getElementById("email").onblur=function(){
            var email=document.getElementById("email").value;
            var pattern = /^([a-zA-Z0-9_\#\.\*\-]+)@([a-zA-Z]+).([a-zA-Z]{2,3})$/
            if(email.length==0){  //abc_123@gmail.com
                document.getElementById("msg1").innerHTML="email is required"
                document.getElementById("msg1").style.color="red"
            }
            else if(!pattern.test(email)){
                document.getElementById("msg1").innerHTML="Invalid Email"
                document.getElementById("msg1").style.color="red"
            }
            else{
                document.getElementById("msg1").innerHTML=" "
           }

     }
        

        function captcha(){
            var a=Math.floor(Math.random()*10);  //0 to 9
            var b=Math.floor(Math.random()*10);  
            var c=Math.floor(Math.random()*10);  
            var d=Math.floor(Math.random()*10);  
            var num=a+' '+b+' '+c+' '+d
            document.getElementById("cap").value=num
        }
        document.getElementById("checkcap").onblur=function(){
            var captcha=removespaces(document.getElementById("cap").value);
            var captcha1=removespaces(this.value); 
            if(captcha1.length==0 || captcha1 !=captcha){
                document.getElementById("msg4").innerHTML="Invalid Captcha"
                document.getElementById("msg4").style.color="red"
            }
            else
            document.getElementById("msg4").innerHTML=''

        }
        function removespaces(str){
            return str.split(' ').join('');
        }
        
    document.getElementById("city").onchange=function(){
                if(this.value=="other"){
                var t=document.createElement('input');
                t.setAttribute("type","text");
                t.setAttribute("id","txt");
                document.getElementById('c').appendChild(t); 
                document.getElementById('txt').focus()  
 
                }                   
           }
    
    // }
    </script>

</body>
</html>